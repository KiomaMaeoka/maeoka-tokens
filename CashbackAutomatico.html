<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashback Autom√°tico - Maeoka Engenharia</title>
    <style>
        body { font-family: Arial, sans-serif; background: #1a3a52; color: #fff; padding: 20px; }
        .container { max-width: 400px; margin: 0 auto; background: #2c5282; padding: 20px; border-radius: 10px; }
        input, button { width: 100%; padding: 10px; margin: 10px 0; }
        button { background: #fff; color: #1a3a52; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <h2>üéÅ Cashback Autom√°tico</h2>
        <div>Dados da Indica√ß√£o</div>
        <input id="numeroObra" placeholder="N√∫mero da Obra">
        <input id="senhaRecompensa" type="password" placeholder="Senha da Recompensa">
        <button onclick="solicitarCashback()">Solicitar (Gr√°tis)</button>
        <div id="resultado"></div>
    </div>
    <script src="https://unpkg.com/tonweb/dist/tonweb.js"></script>
    <script>
      async function solicitarCashback() {
        const numeroObra = document.querySelector('#numeroObra').value;
        const senha = document.querySelector('#senhaRecompensa').value;
        const valorObra = await verificarGoogleSheets(numeroObra, senha); // Placeholder
        const cashback = valorObra * 0.03;
        const wallet5000 = new TonWeb(new TonWeb.HttpProvider('https://toncenter.com/api/v2/jsonRPC'), { seed: process.env.WALLET5000_SEED });
        const saldo = await wallet5000.getBalance();

        if (cashback > saldo / 1e9) {
          document.getElementById('resultado').innerText = "O numero que voc√™ est√° solicitando √© maior do que temos na nossa wallet semente, um email foi enviado para o Engenheiro Kioma que j√° tem acesso ao saldo solicitado e ao numero da sua wallet e ele enviar√° em at√© 24h o saldo solicitado";
          enviarEmail("O cashback que o cliente est√° solicitando no modo manual √© maior que o que tem na wallet, reponha os tokens da wallet");
        } else {
          await wallet5000.sendTransaction({ to: 'endere√ßo_do_cliente', amount: cashback * 1e9 }); // Substitua 'endere√ßo_do_cliente'
          document.getElementById('resultado').innerText = "Cashback de " + cashback + " MAEOKA enviado!";
        }
      }

      // Fun√ß√µes placeholder (implementar depois)
      async function verificarGoogleSheets(numero, senha) { return 1000; } // Exemplo
      function enviarEmail(mensagem) { /* L√≥gica de email */ }
    </script>
</body>
</html>
